<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:body>

        <!-- ðŸ’œ Data Privacy Notice Dialog -->
        <p:dialog id="dpaDialog"
                  widgetVar="dpaDialog"
                  header="Data Privacy Notice"
                  modal="true"
                  closable="false"
                  draggable="false"
                  resizable="false"
                  width="650"
                  showEffect="fade"
                  hideEffect="fade"
                  styleClass="dpa-dialog">

            <h:form id="dpaForm">

                <h:panelGroup layout="block" styleClass="dpa-content">
                    <p:graphicImage name="images/privacy-shield.png"
                                    library="resources"
                                    style="width:80px; margin:auto; display:block;" />

                    <h:outputText escape="false" style="white-space: pre-line;">
                        <![CDATA[
                        <div style='font-size:15px; color:#333; line-height:1.6; text-align:justify;'>
                            <p>
                                <strong>Welcome to the Online Enrollment System</strong>
                            </p>
                            <p>
                                In compliance with the <strong>Data Privacy Act of 2012 (Republic Act No. 10173)</strong>,
                                we are committed to protecting your personal information.
                            </p>
                            <p>
                                By proceeding, you consent to the collection, storage, and processing of your data
                                solely for academic, administrative, and institutional purposes such as enrollment,
                                evaluation, billing, and official communications.
                            </p>
                            <p>
                                Your information will remain confidential and will not be shared with unauthorized
                                entities without your consent.
                            </p>
                            <p style="font-style: italic;">
                                For any privacy concerns, you may contact our Data Protection Officer through the
                                official school communication channels.
                            </p>
                        </div>
                        ]]>
                    </h:outputText>
                </h:panelGroup>

                <f:facet name="footer">
                    <div style="text-align:center; margin-top:15px;">
                        <p:commandButton value="I Understand and Agree"
                                         styleClass="p-button-rounded p-button-success"
                                         icon="pi pi-check"
                                         actionListener="#{loginBean.acknowledgeDpaNotice}"
                                         oncomplete="PF('dpaDialog').hide();"
                                         update="@form" />
                    </div>
                </f:facet>

            </h:form>
        </p:dialog>
        <p:dialog id="dpaDialog" header="Data Privacy Notice"
                  widgetVar="dpaDialog"
                  modal="true" closable="false" resizable="false"
                  width="600">

            <h:form id="dpaForm">
                <h:outputText
                    value="This system processes your personal information in accordance with the Data Privacy Act of 2012. By continuing, you acknowledge and agree to this policy."
                    style="white-space: normal; line-height: 1.5;" />
                <br/><br/>

                <p:commandButton value="I Understand"
                                 action="#{loginBean.acknowledgeDpaNotice}"
                                 update=":messages"
                                 oncomplete="PF('dpaDialog').hide()"
                                 styleClass="p-button-success" />
            </h:form>
        </p:dialog>

        <script>
            window.addEventListener('DOMContentLoaded', function () {
                if (#{not empty facesContext.externalContext.sessionMap['showDpaNotice']}) {
                    PF('dpaDialog').show();
            #{facesContext.externalContext.sessionMap.remove('showDpaNotice')};
                }
            });
        </script>


        <!-- ðŸŽ¨ Styling -->
        <style>
            .dpa-dialog .ui-dialog-titlebar {
                background: linear-gradient(90deg, #6A1B9A, #8E24AA);
                color: #fff !important;
                font-weight: bold;
                font-size: 1.1em;
                text-align: center;
                border: none;
                border-radius: 10px 10px 0 0;
            }

            .dpa-dialog .ui-dialog-content {
                background-color: #fafafa;
                border-radius: 0 0 10px 10px;
                padding: 1.5em;
            }

            .dpa-content p {
                margin-bottom: 0.8em;
            }

            .dpa-dialog .ui-dialog-footer {
                background: #f5f5f5;
                border-top: 1px solid #ddd;
                padding: 1em;
                border-radius: 0 0 10px 10px;
            }

            .p-button-success {
                background-color: #6A1B9A !important;
                border-color: #6A1B9A !important;
            }

            .p-button-success:hover {
                background-color: #8E24AA !important;
                border-color: #8E24AA !important;
            }
        </style>
    </h:body>
</html>
